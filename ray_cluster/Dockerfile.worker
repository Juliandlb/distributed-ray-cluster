FROM ray-cluster-base:latest

# Copy worker node configuration and scripts
COPY config/worker_config.yaml /app/
COPY scripts/start_worker.sh /app/
COPY scripts/health_check.sh /app/

# Make scripts executable
RUN chmod +x /app/start_worker.sh /app/health_check.sh

# Set health check
HEALTHCHECK --interval=30s --timeout=10s --start-period=60s --retries=3 \
    CMD /app/health_check.sh

# Start the worker node
CMD ["/app/start_worker.sh"] 